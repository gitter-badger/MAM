function getParameterByName(a){var b=RegExp("[?&]"+a+"=([^&]*)").exec(window.location.search);return b&&decodeURIComponent(b[1].replace(/\+/g," "))}function decodeHTML(a){var b=document.createElement("textarea");return b.innerHTML=a,b.value}!function(){for(var a,b=function(){},c=["assert","clear","count","debug","dir","dirxml","error","exception","group","groupCollapsed","groupEnd","info","log","markTimeline","profile","profileEnd","table","time","timeEnd","timeStamp","trace","warn"],d=c.length,e=window.console=window.console||{};d--;)a=c[d],e[a]||(e[a]=b)}(),String.prototype.includes||(String.prototype.includes=function(){"use strict";return-1!==String.prototype.indexOf.apply(this,arguments)}),function(a,b,c){"use strict";function d(b,c){this.element=b,this.settings=a.extend({},f,c),this._defaults=f,this._name=e,this.init()}var e="speakable",f={voice:"Vicki",msg:null,rate:null,pitch:null,volume:null,transcript:"",buttonElement:null,onstart:function(){},onresume:function(){},onend:function(){},onaudiostart:function(){},onsoundstart:function(){},onspeechstart:function(){},onsoundend:function(){},onaudioend:function(){},onresult:function(){},onnomatch:function(){},onerror:function(){}};a.extend(d.prototype,{init:function(){var d=this,e=a(this.element),f=b.speechSynthesis.getVoices(),g=d.settings.buttonElement||e;g.click(function(g){g.preventDefault(),e[0].dataset.voice&&(d.settings.voice=e[0].dataset.voice),e[0].dataset.rate&&(d.settings.rate=e[0].dataset.rate),e[0].dataset.pitch&&(d.settings.pitch=e[0].dataset.pitch),e[0].dataset.volume&&(d.settings.volume=e[0].dataset.volume),e[0].dataset.transcript&&(d.settings.transcript=e[0].dataset.transcript);var h=d.settings.voice;if(b.speechSynthesis.cancel(),b.speechSynthesis.speaking)return void(b.speechSynthesis.paused?(b.speechSynthesis.resume(),"function"==typeof d.settings.onresume&&d.settings.onresume()):(b.speechSynthesis.pause(),"function"==typeof d.settings.onpause&&d.settings.onpause()));var i;if(d.settings.transcript){var j=a(c.getElementById(d.settings.transcript));i=a.inArray(j.prop("tagName").toLowerCase(),["textarea","input"])>-1?j.val():j.clone().find(".unspeakable").empty().remove().end().text()}i="<div>"+i+"</div>";var k,l=d.settings.text||a(e).data("text")||null;if(l)k=l,console.log("..");else if(console.log("."),console.log(d.settings.transcript),console.log(c.getElementById(d.settings.transcript)),c.getElementById(d.settings.transcript)){console.log("..");var j=a(c.getElementById(d.settings.transcript)).clone();j.find("*[data-enunciate]").each(function(){console.log("enunciate: "+a(this).attr("data-enunciate")),a(this).text(a(this).attr("data-enunciate")),console.log(a(this).text())}),k=j.find(".unspeakable").empty().remove().end().text()}else{console.log("...    ");var j=a(e).clone();j.find("*[data-enunciate]").each(function(){console.log("enunciate: "+a(this).attr("data-enunciate")),a(this).text(a(this).attr("data-enunciate")),console.log(a(this).text())}),k=j.find(".unspeakable").empty().remove().end().text()}var m=new SpeechSynthesisUtterance;m.text=k,m.lang="en-US",m.voice=f.filter(function(a){return a.name==h})[0],m.rate=null==d.settings.rate?navigator.userAgent.match(/iPhone/i)||navigator.userAgent.match(/iPod/i)?.4:1.24:d.settings.rate,null!==d.settings.pitch&&(m.pitch=d.settings.pitch),null!==d.settings.volume&&(m.volume=d.settings.volume),"function"==typeof d.settings.onstart&&(m.onstart=d.settings.onstart),"function"==typeof d.settings.onend&&(m.onend=d.settings.onend),"function"==typeof d.settings.onerror&&(m.onerror=d.settings.onerror),"function"==typeof d.settings.onpause&&(m.onpause=d.settings.onpause),"function"==typeof d.settings.onresume&&(m.onresume=d.settings.onresume),"function"==typeof d.settings.onmark&&(m.onmark=d.settings.onmark),"function"==typeof d.settings.onboundary&&(m.onboundary=d.settings.onboundary),b.speechSynthesis.speak(m)})}}),a.fn[e]=function(b){return this.each(function(){a.data(this,"plugin_"+e)||a.data(this,"plugin_"+e,new d(this,b))})}}(jQuery,window,document),window.addEventListener("resource_view__stateSet",function(){$("#above-fold").each(function(){$(this).css("top",((0-(60+24*($("#resource-view-body > tr").length+2)+16))/16).toString()+"em")})}),$(window).bind("beforeunload",function(){try{window.speechSynthesis.cancel()}catch(a){}}),$(".js-rem").empty().remove(),$("html.touch .untouchable").empty().remove(),$("html.no-touch .strictly-touchable").empty().remove(),$(".dashbox .shell .expand-btn").click(function(a){a.preventDefault(),$(this).find(".fa").toggleClass("fa-expand").toggleClass("fa-compress").end().closest(".shell").toggleClass("shell-greedy").toggleClass("expanded"),$("html, body").animate({scrollTop:$(this).closest(".shell").find("h2,h3").offset().top-100},640)}),$(".resource-edit .page-wrapper").focusin(function(){$("#focus button").addClass("save").children("span").text("Save")}).click(function(){}).focusout(function(){}),$("#above-fold").focusin(function(){$("#focus button").removeClass("save").children("span").text("Go")}),$("#new-field").click(function(a){a.preventDefault(),$(this).closest(".shell").after($(".shell-new-setting-master").clone().show().removeClass("shell-new-setting-master").addClass("shell-field"))}),$('a[href="#resource-view"]').click(function(a){a.preventDefault(),$("html, body").animate({scrollTop:0},640)}),$(".shell-getresources").each(function(){var a=$(this),b=a.find("form"),c=a.find("textarea.code-selectable");a.find("input").on("change keyup",function(){var a=b.serializeArray(),d=[],e={};$.each(a,function(a,b){if(b.value&&b.name.indexOf("[]")>1){var c=b.name.substring(0,b.name.indexOf("[]"));try{e[c].push(b.value)}catch(d){e[c]=[b.value]}}}),$.each(e,function(b,c){a.push({name:b,value:c.join(",")})}),$.each(a,function(a,b){b.value&&!b.name.includes("[]")&&"cache"!=b.name&&d.push(b.name+"=`"+b.value+"`")});var f=!1;try{f="1"==jQuery.grep(a,function(a){return"cache"==a.name})[0].value?!0:!1}catch(g){}c.val("[["+(f?"":"!")+"getResources? "+d.join(" &")+"]]")}).end().find(".horz-nav .copy").click(function(a){a.preventDefault(),c.click()})}),$(".shell-media").each(function(){var a=$(this);a.find(".list-view-btn").click(function(b){b.preventDefault(),a.find(".media-box").removeClass("grid-view")}),a.find(".grid-view-btn").click(function(b){b.preventDefault(),a.find(".media-box").addClass("grid-view")})}),$(".shell-twitter").each(function(){var a=$(this);a.find("textarea"),a.on("change keyup",function(){a.find(".char-count").text(140-a.find("textarea").val().length)})}),$(".shell-sign-manifesto").each(function(){var a=$(this);a.find("textarea").on("change keyup",function(){$(this).val()?(a.find(".twitter-link").attr("href","http://twitter.com/home?status="+encodeURIComponent($(this).val())),a.find("button").prop("disabled",!1)):(a.find(".twitter-link").removeAttr("href"),a.find("button").prop("disabled",!0))})}),$(".speakable").each(function(){$(this).speakable({buttonElement:$(this).find(".speaker-btn").addClass("clickable"),onstart:function(){$(".play-controls").find(".play-pause-btn .fa").addClass("fa-pause").end().show()},onresume:function(){$(".play-controls").find(".play-pause-btn .fa").addClass("fa-pause").end().show()},onend:function(){console.log("onend"),$(".play-controls").find(".play-pause-btn .fa").removeClass("fa-pause").end().hide()},onmark:function(){console.log("onmark")},onboundary:function(){console.log("onboundary")},onpause:function(){console.log("pause"),$(".play-controls").find(".play-pause-btn .fa").removeClass("fa-pause")},onerror:function(){console.log("onerror"),$(".play-controls").find(".play-pause-btn .fa").removeClass("fa-pause")}})}),$(".speakable-tip,.speakable-title").each(function(){$(this).speakable({text:$(this).attr("title")}).addClass("clickable")}),$(window).on("speechSilenced",function(){$(".play-controls").find(".play-pause-btn .fa").removeClass("fa-pause")}).on("speechResumed",function(){$(".play-controls").find(".play-pause-btn .fa").addClass("fa-pause")}),$(".play-pause-btn").each(function(){$(this);$(this).click(function(a){a.preventDefault(),window.speechSynthesis.paused?(window.speechSynthesis.resume(),$(this).find(".fa").removeClass("fa-pause"),$(window).trigger("speechResumed")):(window.speechSynthesis.pause(),$(this).find(".fa").addClass("fa-pause"),$(window).trigger("speechSilenced"))})}),$(document).ready(function(){1==getParameterByName("hc")&&$("body").addClass("inverted")});